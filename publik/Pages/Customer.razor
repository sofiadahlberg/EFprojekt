@page "/customer"
@using System.Net.Http;
@using System.Net.Http.Json;
@using System.Threading.Tasks;


<PageTitle>Customer</PageTitle>

<h1>Hello, world!</h1>
<!--
<script>
    const postData = {
        FirstName: "John",
        LastName: "Doe",
        PhoneNumber: "123456789",
        Date: "2022-03-01", // Set the desired date
        ApiKeyRequired: false,
        TreatmentId: 1 // Set the desired TreatmentId
    };

    fetch("http://localhost:5099/api/customer", {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(postData)
    })
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('Error:', error));
</script>-->

<button @onclick="SendPostRequest">Send POST Request</button>

@code {
    private async Task SendPostRequest()
    {
        var postData = new
        {
            FirstName = "Try",
            LastName = "Doe",
            PhoneNumber = "123456789",
            Date = "2022-03-01", // Set the desired date
            ApiKeyRequired = false,
            TreatmentId = 1 // Set the desired TreatmentId
        };

        var apiUrl = "http://localhost:5099/api/customer";

        using (var client = new HttpClient())
        {
            var response = await client.PostAsJsonAsync(apiUrl, postData);

            if (response.IsSuccessStatusCode)
            {
              var result = await response.Content.ReadFromJsonAsync<Customer>();
 Console.WriteLine($"POST request successful. Response: {result}");
            }
            else
            {
                Console.WriteLine($"POST request failed. Status code: {response.StatusCode}");
            }
        }
    }
}
